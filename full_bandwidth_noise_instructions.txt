Taking full bandwidth noise spectra with the MCE:

To set up the appropriate directories and formatting:
rm experiment.cfg
	-if you have already run a noise test in a specific configuration with non-standard defaults, you may want to remove the last experiment before generating the next one
set_directory
	-generates a directory for that day's data if it does not already exist and updates /data/cryo/current_data to point to it (also $MAS_DATA)
	-generates a file experiment.cfg from the default experiment
mas_param set param X
	-changes any parameters in the experiment file before tuning
	-for unbiased squids I use columns_off and default_sa_bias
	-for tuning the SSAs I set sa_ramp_bias 1 and change the other sa_ramp_....
	-for sq1 characterization I set sq1_servo_bias_ramp 1 and change the other sq1_servo_bias_... depending on the test
auto_setup
	-tunes the SQUIDs all the way through the SQ1, with a small ramp on TES bias to get proof of life
	-for tuning only the SSA one can use --last-stage=sa_ramp
mce_cmd -x rb X Y
	-read back set values to confirm they were set correctly
	-if you leave it blank after rb the error message will show the acceptable categories, and blank after the category will show the acceptable variables
mce_cmd -x wb X Y
	-writes a new value for some particular variable that we want to run in a non tuned state

To take full bandwidth data with no SQUIDs biased or just the SSA:
mce_cmd -x wb ac off_bias 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
mce_cmd -x wb ac on_bias 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
mce_cmd -x wb ac enbl_mux 0

The first two commands make sure that the row select switches are staying in the same state at all times.  The enbl_mux value tells the MCE that you aren't interested in switching, otherwise it will actively switch from 0 to 0 with transients that make significant noise.

Getting all of the settings right for the SQ1 is tricky so I recommend using Shawn Henderson's script for the subject which has been attached with these instructions (./shawn_mce_freeze_servo).  It is also capable of doing the above for taking full bandwidth measurements of the SSA only.

./go_raw_all.sh N
	Once you have the system configured, you can take the data using this script which results in N traces being taken.

./go_bw.sh raw_ctime.txt
	Averages all of the inidividual traces to generate an FFT for each column.  Make sure that you change MCE_DATADIR to point to the directory where each day's data is saved on your computer.

python plot_raw.py raw_ctime.in
	Plots the FFTs generated by go_bw.sh
